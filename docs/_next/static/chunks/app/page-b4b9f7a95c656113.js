(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2025:function(e,t,s){Promise.resolve().then(s.bind(s,3131))},56:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),l=s(2265);function n(e){let{onFileSubmit:t}=e,[s,n]=(0,l.useState)(!1),o=(0,l.useRef)(null),[r,c]=(0,l.useState)([]);return(0,l.useEffect)(()=>{document.addEventListener("paste",function(e){var t;let s=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(console.log(s),s){for(let e=0;e<s.length;e++)if(-1!==s[e].type.indexOf("image")){let t=s[e].getAsFile();console.log(t),c(e=>[t])}}})},[]),(0,a.jsx)("div",{className:"flex items-center justify-center w-full m-0 p-0",children:(0,a.jsxs)("form",{action:"/files/",encType:"multipart/form-data",method:"post",className:"".concat(s?"bg-gray-400":"bg-gray-900 bg-opacity-70","  p-4 w-full rounded-lg  min-h-[10rem] text-center flex flex-col items-center justify-center border-separate border-4 border-dashed border-gray-600"),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),n(!0)},onSubmit:e=>e.preventDefault(),onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),n(!1),e.dataTransfer.files&&e.dataTransfer.files[0])for(let t=0;t<e.dataTransfer.files.length;t++)c(s=>[...s,e.dataTransfer.files[t]])},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),n(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),n(!0)},children:[(0,a.jsx)("input",{placeholder:"fileInput",className:"hidden",ref:o,type:"file",multiple:!0,onChange:function(e){if(e.preventDefault(),console.log("File has been added"),e.target.files&&e.target.files[0]){console.log(e.target.files);for(let t=0;t<e.target.files.length;t++)c(s=>[...s,e.target.files[t]])}},accept:"image/*"}),(0,a.jsxs)("p",{className:"text-gray-700 font-bold text-sm",children:["Drag & Drop files or",(0,a.jsx)("br",{})," ",(0,a.jsx)("span",{className:"font-bold text-blue-600 cursor-pointer",onClick:function(){o.current.value="",o.current.click()},children:(0,a.jsx)("u",{children:"Select files"})})," ","to upload"]}),(0,a.jsx)("div",{className:"w-full flex flex-col items-center p-3",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"bg-zinc-700/50 rounded-lg p-2 border border-zinc-700/50 w-full flex flex-row space-x-5 whitespace-nowrap",children:[(0,a.jsx)("p",{className:"text-ellipsis truncate",children:e.name}),(0,a.jsx)("span",{className:"text-red-500 cursor-pointer",onClick:()=>(function(e,t){let s=[...r];s.splice(t,1),c([]),c(s)})(e.name,t),children:"remove"})]},t))}),(0,a.jsx)("button",{className:"bg-black rounded-lg p-2 mt-3 w-auto",onClick:function(e){t&&t(r)},children:(0,a.jsx)("span",{className:"p-2 text-white",children:"Submit"})})]})})}},3131:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),l=s(6691),n=s.n(l),o=s(56),r=s(2265);let c=s(2348);function i(e){let{ipAddress:t}=e,[s,l]=(0,r.useState)(!0),[c,i]=(0,r.useState)({width:0,height:0}),[d,u]=(0,r.useState)({x:100,y:100,mouseX:0,mouseY:0}),g=e=>{let{left:t,top:s}=e.currentTarget.getBoundingClientRect(),a=e.clientX-t,l=e.clientY-s;u({x:-(2.5*a)+60,y:-(2.5*l)+60,mouseX:a-60,mouseY:l-60})},[p,m]=(0,r.useState)("http://localhost:8000"),[h,x]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(0),[w,N]=(0,r.useState)(""),[y,C]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[D,M]=(0,r.useState)([]),[I,z]=(0,r.useState)(!1),[P,T]=(0,r.useState)([]),[E,H]=(0,r.useState)((()=>{{let e=window.localStorage.getItem("selectedModel");if(e)try{return JSON.parse(e)}catch(e){return{id:-1,name:"Default Model"}}}})()),[L,O]=(0,r.useState)(1),[_,B]=(0,r.useState)(),[R,Z]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[A,F]=(0,r.useState)(null),[W,G]=(0,r.useState)("4/3"),[J,U]=(0,r.useState)("4/3"),[V,q]=(0,r.useState)(50),[K,Q]=(0,r.useState)(!1),[$,ee]=(0,r.useState)("http://"),[et,es]=(0,r.useState)(""),ea=(e,t)=>{console.log("downloadImage",e,t),fetch(e).then(e=>e.blob()).then(e=>{var s=new ClipboardItem({"image/png":e});navigator.clipboard.write([s]),el({type:"primary",message:"Copied <strong>".concat(t,"</strong> to clipboard")})}).catch(console.error)},el=e=>{e&&(B(e),setTimeout(()=>{B(null)},2e3))};(0,r.useEffect)(()=>{if(E){var e;e=E.id,Y(!0),fetch("".concat(p,"/selectmodel/")+e,{method:"POST",body:JSON.stringify({id:e})}).then(e=>e.json()).then(e=>{console.log(e.alert),e.alert&&el(e.alert),Y(!1)}).catch(e=>console.log(e)),localStorage.setItem("selectedModel",E.toString())}},[E]),(0,r.useEffect)(()=>{en();let e=()=>{let t=new WebSocket("".concat(p.replace("http","ws"),"/ws"));return t.onopen=()=>{console.log("connected"),F(!0)},t.onclose=()=>{console.log("disconnected"),F(!1),setTimeout(e,2e3)},t.onmessage=e=>{console.log(e.data);var t=JSON.parse(e.data);t.progress?(console.log("Progress",t.progress),v(Math.round(100*parseFloat(t.progress)))):t.result?(console.log("Result",t.result),N("".concat(p,"/result/").concat(t.result.url)),z(!0),Y(!1),M(e=>(console.log("previous",e),[...e,{id:t.result.id,inputImage:"".concat(p,"/result/").concat(t.result.input),outputImage:"".concat(p,"/result/").concat(t.result.url),debugImage:"".concat(p,"/result/").concat(t.result.debug),modelName:t.result.model_name}]))):t.debug?(console.log("Debug",t.debug),S("".concat(p,"/result/").concat(t.debug.url))):t.error?console.log("Error",t.error):t.message?(t.message&&"alert"===t.message.type&&(el(t.message),t.message.model_id&&H(t.message.model_id)),console.log("Message",t.message)):t.connected?console.log("Connected",t.connected):console.log("Unknown",t)},()=>{t.close()}};e()},[p]);let en=()=>{Y(!0),fetch("".concat(p,"/models"),{method:"GET"}).then(e=>e.json()).then(e=>{console.log(e),T(e.models),Y(!1)}).catch(e=>console.log(e))};return(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-4 bg-black-opactiy-30",children:[(0,a.jsxs)("div",{className:"drawer z-50 fixed top-4 left-4",children:[_&&(0,a.jsxs)("div",{role:"alert",className:"bg-".concat("success"===_.type?"green":"gray","-500 text-white alert alert-").concat(_.type," absolute left-0 right-0 mx-auto w-fit"),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:_.message}})]}),X&&(0,a.jsx)("span",{className:"loading loading-infinity loading-lg absolute left-0 right-0 mx-auto"}),(0,a.jsx)("button",{onClick:()=>{x(!h)},className:"btn btn-circle btn-outline absolute",children:(0,a.jsxs)("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3 5.75C3 5.33579 3.33579 5 3.75 5H20.25C20.6642 5 21 5.33579 21 5.75C21 6.16421 20.6642 6.5 20.25 6.5H3.75C3.33579 6.5 3 6.16421 3 5.75Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M3 11.75C3 11.3358 3.33579 11 3.75 11H20.25C20.6642 11 21 11.3358 21 11.75C21 12.1642 20.6642 12.5 20.25 12.5H3.75C3.33579 12.5 3 12.1642 3 11.75Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M3 17.75C3 17.3358 3.33579 17 3.75 17H20.25C20.6642 17 21 17.3358 21 17.75C21 18.1642 20.6642 18.5 20.25 18.5H3.75C3.33579 18.5 3 18.1642 3 17.75Z",fill:"currentColor"})]})})]}),(0,a.jsxs)("div",{className:"transition-2 transition-all z-40 w-80 fixed top-1/2 left-4 transform -translate-y-1/2 h-2/3 bg-gray-900 rounded-xl border border-neutral-600 backdrop-blur-2xl ".concat(h?"block translate-x-0":" -translate-x-full"),children:[(0,a.jsx)("div",{className:"fixed -right-48 -mb-8 w-80 transform rotate-180 translate-y-64  ",children:(0,a.jsxs)("div",{className:"flex items-center justify-center transform rotate-90 ",children:[(0,a.jsx)("strong",{children:"- "}),(0,a.jsx)("input",{type:"range",min:0,max:"100",value:V,onChange:e=>q(parseInt(e.target.value)),className:"w-64 bg-gray-700 range range-primary "}),(0,a.jsx)("strong",{children:" +"}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsx)("button",{className:"btn btn-primary btn-circle  magnify ".concat(K?"":"btn-outline"),onClick:()=>Q(!K),children:(0,a.jsxs)("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M12 8C10.3431 8 9 9.34315 9 11C9 12.6569 10.3431 14 12 14C13.6569 14 15 12.6569 15 11C15 9.34315 13.6569 8 12 8ZM12 12C11.4477 12 11 11.5523 11 11C11 10.4477 11.4477 10 12 10C12.5523 10 13 10.4477 13 11C13 11.5523 12.5523 12 12 12Z",fill:"currentColor"})]})})})]})}),(0,a.jsxs)("div",{className:"fixed left-0 right-0 top-0 bottom-0 overflow-y-scroll overflow-visible custom-scrollbar",children:[(0,a.jsxs)("div",{className:"p-4 w-full",children:[(0,a.jsx)(o.default,{onFileSubmit:e=>{if(0===e.length);else{v(0);let t=new FormData;e.forEach(e=>{t.append("files",e),t.append("mode",L)}),fetch("".concat(p,"/uploadfiles"),{method:"POST",body:t}).then(e=>e.json()).then(e=>{console.log(e),z(!1),C("".concat(p,"/input/").concat(e.files[0].input)),S("".concat(p,"/input/").concat(e.files[0].input)),N(""),Y(!0)}).catch(e=>console.log(e))}}}),(0,a.jsxs)("div",{className:"items-center px-2",children:[(0,a.jsx)("progress",{className:"progress progress-success w-full",value:j,max:"100"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-right text-teal-400 px-1",children:"Porgess:"}),(0,a.jsx)("p",{className:"text-xs text-right text-teal-400 px-1",children:"".concat(j,"%")})]})]})]}),(0,a.jsx)("div",{className:"flex w-full justify-center px-4",children:(0,a.jsxs)("select",{value:E?E.id:-1,onChange:e=>{H(P[e.target.value])},className:"select select-success w-full max-w-xs ",children:[(0,a.jsx)("option",{value:"-1",children:"Default Model"},-1),P.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,a.jsxs)("label",{className:"form-control w-full max-w-xs p-4",children:[(0,a.jsx)("div",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Denois Mode"})}),(0,a.jsxs)("select",{value:L,onChange:e=>O(e.target.value),className:"select select-bordered",children:[(0,a.jsx)("option",{disabled:!0,value:-1,children:"Default"}),(0,a.jsx)("option",{value:1,children:"Iterate"}),(0,a.jsx)("option",{value:2,children:"Batch"}),(0,a.jsx)("option",{value:3,children:"Overlapping"}),(0,a.jsx)("option",{value:4,children:"Smooth Blending"}),(0,a.jsx)("option",{value:5,children:"Resizing"}),(0,a.jsx)("option",{value:6,children:"Adaptive Resize"})]})]}),(0,a.jsxs)("div",{className:"m-4 ",children:[(0,a.jsxs)("label",{className:"cursor-pointer label",children:[(0,a.jsx)("span",{className:"label-text",children:"Original Aspect ratio"}),(0,a.jsx)("input",{checked:R,type:"checkbox",className:"toggle toggle-success",onChange:e=>Z(e.target.checked)})]}),(0,a.jsxs)("label",{className:"cursor-pointer label",children:[(0,a.jsx)("span",{className:"label-text",children:"Show Debug"}),(0,a.jsx)("input",{checked:f,type:"checkbox",className:"toggle toggle-success",onChange:e=>b(e.target.checked)})]})]}),(0,a.jsx)("div",{className:"w-full p-1 grid grid-cols-3 border-t-2 border-dashed border-gray-600",children:D.map((e,t)=>(0,a.jsx)("img",{onClick:()=>{C(e.inputImage),N(f?e.debugImage:e.outputImage),S(e.debugImage)},title:e.modelName,className:"p-1 aspect-square rounded-sm hover:border-2 border-green-500",src:e.outputImage,alt:""},t))})]})]}),(0,a.jsxs)("div",{className:" z-10 max-w-5xl w-full items-center justify-between font-mono text-sm lg:flex  black-opactiy-30",children:[(0,a.jsxs)("div",{className:"w-full px-4",children:[(0,a.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"select select-primary select-sm max-w-xs ",children:[(0,a.jsx)("option",{value:"http://localhost:8000",children:"http://localhost:8000"},0),(0,a.jsx)("option",{value:"http://10.125.35.23:8000",children:"http://10.125.35.23:8000"},1),(0,a.jsx)("option",{value:$,children:$},2)]}),(0,a.jsx)("input",{type:"text",placeholder:"Type here",className:"ml-2 input input-bordered input-sm input-primary  max-w-xs",value:$,onChange:e=>ee(e.target.value)})]}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 flex h-48 w-full items-end justify-center bg-gradient-to-t from-white via-white dark:from-black dark:via-black lg:static lg:h-auto lg:w-auto lg:bg-none",children:(0,a.jsxs)("a",{className:"pointer-events-none flex place-items-center gap-2 p-8 lg:pointer-events-auto lg:p-0",href:"https://vb.pusan.ac.kr/visbic/index..do",target:"_blank",rel:"noopener noreferrer",children:["By"," ",(0,a.jsx)(n(),{src:"/logo.png",alt:"Vercel Logo",className:"",width:100,height:24,priority:!0})]})}),(0,a.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full ".concat(null==A?"bg-zinc-200":A?"bg-sky-200":"bg-pink-200"," opacity-75")}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 ".concat(null==A?"bg-amber-600":A?"bg-green-600":"bg-red-600")})]})]}),(0,a.jsx)("div",{style:{paddingLeft:h?"".concat(Math.min(Math.max(20*V/65,10),20),"rem"):"0%"},className:"w-full flex justify-center items-center",children:(0,a.jsx)("div",{style:{width:"".concat(V,"%")},className:"max-w-2/3 mockup-window rounded-b-xl border bg-base-300 my-8 transition-all duration-100",children:(0,a.jsx)("div",{className:"".concat(K?"cursor-none":"cursor-pointer"),children:(0,a.jsxs)("div",{onClick:e=>{K&&ea(w,"output.png")},className:"diff aspect-[".concat(f?J:W,"]"),style:{aspectRatio:"".concat(f?J:W)},onMouseLeave:e=>{l(!1),g(e)},onMouseEnter:e=>{let{width:t,height:s}=e.currentTarget.getBoundingClientRect();i({width:t,height:s}),l(!0),g(e)},onMouseMove:e=>{g(e)},children:[(0,a.jsx)("div",{className:"diff-item-1",children:(0,a.jsx)("img",{className:f?"object-contain":"",src:I?w:k||"https://storage.googleapis.com/proudcity/mebanenc/uploads/2021/03/placeholder-image.png",loading:"lazy",onLoad:e=>{let t=e.target;var s=t.naturalWidth,a=t.naturalHeight,l=window.innerHeight,n=l*(s/a);f&&n&&l&&U("".concat(n,"/").concat(l))}})}),(0,a.jsx)("div",{onClick:e=>{ea(y,"input.png")},className:"diff-item-2",children:(0,a.jsx)("img",{src:y||"https://storage.googleapis.com/proudcity/mebanenc/uploads/2021/03/placeholder-image.png",onLoad:e=>{let t=e.target;var s=t.naturalWidth,a=t.naturalHeight,l=window.innerHeight,n=l*(s/a);n&&l?G("".concat(n,"/").concat(l)):G("4/3")}})}),(0,a.jsx)("div",{className:"diff-resizer cursor-col-resize"}),(0,a.jsx)("div",{style:{backgroundPosition:"".concat(d.x,"px ").concat(d.y,"px"),backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(2.5*c.width,"px ").concat(2.5*c.height,"px"),backgroundRepeat:"no-repeat",display:K&&s?"block":"none",top:"".concat(d.mouseY,"px"),left:"".concat(d.mouseX,"px"),width:"".concat(120,"px"),height:"".concat(120,"px")},className:"z-50 border pointer-events-none absolute border-gray-500"},y),(0,a.jsx)("div",{style:{backgroundPosition:"".concat(d.x,"px ").concat(d.y,"px"),backgroundImage:"url(".concat(""===w?k:w,")"),backgroundSize:"".concat(2.5*c.width,"px ").concat(2.5*c.height,"px"),backgroundRepeat:"no-repeat",display:K&&s?"block":"none",top:"".concat(d.mouseY,"px"),left:"".concat(d.mouseX+120*(d.mouseX>c.width-240?-1:1),"px"),width:"".concat(120,"px"),height:"".concat(120,"px")},className:"z-50 border-2 pointer-events-none absolute border-green-500"})]})})})}),(0,a.jsxs)("footer",{className:"text-xs text-center dark:text-gray-200 mt-4",children:["Created on ",new Date().toLocaleDateString()," \xa9 ",(0,a.jsx)("strong",{children:"LIENG HONGKY"})," | VB lab @PNU"]})]})}i.getinitialProps=async e=>{let t=function(){let e=c.networkInterfaces();for(let t in e){let s=e[t];for(let e=0;e<s.length;e++){let{address:t,family:a,internal:l}=s[e];if(!l&&"IPv4"===a)return t}}return null}();return console.log("ipAddress: ",t),{ipAddress:t}};var d=i}},function(e){e.O(0,[610,971,472,744],function(){return e(e.s=2025)}),_N_E=e.O()}]);